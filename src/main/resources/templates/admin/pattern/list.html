<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title>근태패턴 캘린더</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">
<div class="max-w-7xl mx-auto bg-white p-6 rounded shadow">
  <h1 class="text-2xl font-bold mb-6">근태패턴 캘린더</h1>

  <!-- 월 선택 -->
  <form method="get" th:action="@{/admin/pattern/list}" class="flex gap-4 items-end mb-6">
    <input type="month" name="month" th:value="${selectedMonth}" class="border px-3 py-2 rounded h-10">

    <button type="submit"
            class="bg-blue-600 text-white px-4 h-10 rounded hover:bg-blue-700">
      조회
    </button>

    <a href="/admin/pattern/create"
       class="bg-green-600 hover:bg-green-700 text-white font-semibold px-4 h-10 rounded flex items-center">
      + 근태패턴 추가
    </a>
  </form>

  <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
    <!-- 패턴 테이블 -->
    <div class="md:col-span-3 overflow-auto">
      <table class="min-w-full border-collapse text-xs text-center">
        <thead>
        <tr class="bg-gray-200">
          <th class="border border-white p-2 w-32 min-w-[50px]">패턴코드</th>
          <th class="border border-white p-2 w-64 min-w-[100px]">패턴명</th>
          <th th:each="header : ${dateHeaders}" class="border border-white p-2 w-64 min-w-[50px]" th:text="${header}"></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="row : ${patternTable}" class="hover:bg-gray-50">
          <td class="border p-2 w-32 min-w-[50px]" th:text="${row['patternCode']}"></td>
          <td class="border p-2 w-64 min-w-[100px]" th:text="${row['patternName']}"></td>
          <td th:each="day : ${#numbers.sequence(1, daysInMonth)}"
              class="border border-gray p-2 w-64 min-w-[50px]"
              th:classappend="${shiftColorMap[row[day.toString()]]}"
              th:text="${row[day.toString()] != null ? row[day.toString()] : '-'}">
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- 근태코드 색상 리스트 -->
    <div class="bg-gray-50 p-4 rounded shadow text-sm">
      <h2 class="font-bold text-gray-700 mb-2">근태코드 색상</h2>
      <hr>
      <ul>
        <li th:each="code : ${shiftCodeList}" class="flex items-center mb-1">
                <span class="w-4 h-4 rounded-full inline-block mr-2"
                      th:classappend="${shiftColorMap[code.shiftCode]}"></span>
          <span th:text="${code.shiftCode} + ' - ' + ${code.shiftName}"></span>
        </li>
      </ul>
    </div>
  </div>
</div>
</body>
</html>
